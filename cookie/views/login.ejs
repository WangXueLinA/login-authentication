<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>session-cookie登录页面</h1>

  <div>
    <div>
      用户名:
      <input id="username" />
    </div>
    <div>
      密码:
      <input type="password" id="password" />
    </div>
    <div>
      <button id="loginpost">登录-post</button>
    </div>
  </div>

  <script>
    const ologinpost = document.querySelector("#loginpost")
    const username = document.querySelector("#username")
    const password = document.querySelector("#password")

    ologinpost.onclick = () => {
      fetch(`/login`, {
        method: "POST",
        body: `username=${username.value}&password=${password.value}`,
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        }
      }).then(res => res.json()).then(({ code, message }) => {
        if (code === 200) {
          location.href = "/home"
          alert(`${message}`)
        } else {
          alert(`${message}`)
        }
      })
    }
  </script>
</body>

</html>